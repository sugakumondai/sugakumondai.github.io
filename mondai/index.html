<!DOCTYPE html>
<html>
  <head>
    <script>
      var data = JSON.parse(atob(location.href.replace('https://sugakumondai.github.io/mondai/?index=', '')));
      var xiv = new Worker('/mondai/xiv.js');
      var ww = new Worker('/mondai/ww.js');
      function red(e) {
        if(e != false) {
          document.querySelector('#ipa').value = e[0];
          document.querySelector('#use').value = e[1];
        }
        document.querySelector('form').submit();
      }
      xiv.onmessage = m => {
        if(m.data) {
          ww.onmessage = wwm => red(wwm.data);
          ww.postMessage(data[3]);
        } else red(false);
      };
      onload = () => {
        document.querySelector('form').action = data[0];
        document.querySelector('#act').value = data[1];
        document.querySelector('#bro').value = navigator.userAgent;
        xiv.postMessage(data[2]);
      };
    </script>
  </head>
  <body>
    <form method="get" action="">
      <input id="bro" name="browser" hidden>
      <input id="act" name="act" hidden>
      <input id="ipa" name="ipa" hidden>
      <input id="use" name="use" hidden>
    </form>
    <iframe style="display: none;"></iframe>
  </body>
</html>
